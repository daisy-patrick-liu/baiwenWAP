<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>政情数据库</title>
<link rel="stylesheet" href="style/css/reset.css">
<link rel="stylesheet" href="style/css/personal.css">
<link rel="stylesheet" href="style/css/layout.css">
<script src="script/jquery-1.8.3.min.js"></script>
<script src="http://echarts.baidu.com/build/dist/echarts-all.js"></script>
<script src="package/echarts/config.js"></script>
</head>

<body class="zq">
<!-- 头部 -->


<div class="header">
<!-- 头部背景 -->
 
<div class="top-wrap">
<div class="top-tip clearfix w1050">
  <div class="fl t-after">
    <a class="go-index" href=""><i class="ico"></i>首页</a>
    <a class="go-app" class="" href=""><i class="ico"></i>百问APP</a>
    <a class="follow" href=""> <i class="ico"></i>关注微信</a>
  </div>
  <div class="fr t-rbox">
      <span>欢迎来到中国政府管理国安全库!</span>
      <div class="login-regist">
        <i class="ico userPic"></i>
        <a class="re-login" href="">登录</a>
        <a class="re-regist" href="">注册</a>
      </div>
  </div>

</div>
</div>
<div class="header-bg"></div>
<div class="banner-wrap">
  <div class="banner-box clearfix w1050">
    <div class="logo fl">
      <img src="style/images/logo3.png" alt="">
    </div>
    <div class="fr search-box"> 
      <input type="text" placeholder="在此输关键字">
      <span class="">检索</span>
    </div>
  </div>
  </div>
 </div>
  <!-- 左导航 -->
  <div class="container-box w1050 clearfix">
    <div class="map_wrap">
      <div class="tips">
        <span style="width: 670px; display: inline-block;"><i class="icon_new">&#xe749;</i>全国地图<i class="tip">（点击地图选择省份）</i></span>
        <span><i class="icon_new">&#xe60c;</i>地方地图<i class="tip">（点击地图选择市区）</i></span>
      </div>
      <div id="main" style="height:520px"></div>
    </div>
    <!-- 主要领导 -->
    <div class="base_box">
      <div class="head clearfix">
        <div class="fl ttl">湖北省主要领导</div>
      </div>
      <div class="flex_box pics">
        <div class="flex_cell" style="background-image: url(style/images/zq_tx1_03.jpg);">书记：陈 豪</div>
        <div class="flex_cell" style="background-image: url(style/images/zq_tx1_03.jpg);">省人大主任：陈 豪</div>
        <div class="flex_cell" style="background-image: url(style/images/zq_tx3_03.jpg);">省长：阮成发</div>
        <div class="flex_cell" style="background-image: url(style/images/zq_tx4_07.jpg);">省政协主席：罗正富</div>
      </div>
      <!-- 地区介绍 -->
      <div class="intro_wrap">
        <div class="intro">
          <p>湖北，简称“鄂”，省会武汉，位于中国中部偏南、长江中游，洞庭湖以北，故名湖北。</p>
          <p>湖北介于北纬29°05′至33°20′，东经108°21′至116°07′，东连安徽，南邻江西、湖南，西连重庆，西北与陕西为邻，北接河南。湖北省东、西、北三面环山，中部为“鱼米之乡”的江汉平原。</p>
          <p>湖北是承东启西、连南接北的交通枢纽，武汉天河国际机场是中国内陆重要的空港。长江自西向东，横贯全省1062公里。长江及其最大支流汉江，润泽楚天，水网纵横，湖泊密布，湖北省因此又称“千湖之省”。[1] </p>
          <p>湖北文化底蕴深厚，中华民族的始祖炎帝的故里在湖北。春秋战国时期的楚国在长达800多年的历史中，创造了楚文化。[2] </p>
          <p>湖北具有光荣的革命传统。从武昌辛亥首义到新中国成立，湖北为中国革命胜利作出了重要贡献。新民主主义革命时期，仅红安县就孕育了董必武、李先念两位国家主席和200多位将军。[3] </p>
          <p>湖北省科教文化实力位居全国前列，是中国重要的高等教育基地。[4]  湖北省科学研究水平全国领先，国家科技奖获奖项目数量，连续7年位居全国前四。</p>
        </div>
        <div class="infos clearfix">
          <div class="fl info-left">
            <div class="key-value">
              <span class="key">中文名称</span>
              <span>湖北</span>
            </div>
            <div class="key-value">
              <span class="key">外文名称</span>
              Hubei Province
            </div>
            <div class="key-value">
              <span class="key">别    名</span>
              鄂、楚、荆楚
            </div>
            <div class="key-value">
              <span class="key">行政区类别</span>
              省级行政区
            </div>
            <div class="key-value">
              <span class="key">所属地区</span>
              中国 华中地区
            </div>
            <div class="key-value">
              <span class="key">下辖地区</span>
              1个副省级市、11个地级市、1个自治州、3个直管县级市、1个林区
            </div>
            <div class="key-value">
              <span class="key">政府驻地</span>
              武汉市武昌区水果湖路3号
            </div>
            <div class="key-value">
              <span class="key">电话区号</span>
              027、0710至0728
            </div>
            <div class="key-value">
              <span class="key">邮政区码</span>
              430000至443000
            </div>
            <div class="key-value">
              <span class="key">地理位置</span>
              中国中部偏南、长江中游
            </div>
            <div class="key-value">
              <span class="key">面    积 </span>
              18.59万平方千米
            </div>
            <div class="key-value">
              <span class="key">人    口 </span>
              5816万人（2014年常住人口）
            </div>
            <div class="key-value">
              <span class="key">方    言 </span>
              西南官话、江淮官话、赣语等
            </div>
            <div class="key-value">
              <span class="key">气候条件</span>
              亚热带季风性湿润气候
            </div>
          </div>
          <div class="fr">
            <div class="key-value">
              <span class="key">著名景点</span>
              黄鹤楼、武汉东湖、神农架、武当山、长江三峡、隆中风景区等
            </div>
            <div class="key-value">
              <span class="key">机    场</span>
              武汉天河国际机场、十堰武当山机场、宜昌三峡机场等
            </div>
            <div class="key-value">
              <span class="key">火车站</span>
              武昌站、汉口站、武汉站、宜昌东站、襄阳站等
            </div>
            <div class="key-value">
              <span class="key">车牌代码</span>
              鄂A-鄂S
            </div>
            <div class="key-value">
              <span class="key">主要城市</span>
              武汉、襄阳、宜昌、黄石、荆州等
            </div>
            <div class="key-value">
              <span class="key">生产总值</span>
              32297.91亿元（2016年）
            </div>
            <div class="key-value">
              <span class="key">人均生产总值</span>
              4.7万元（2014年）
            </div>
            <div class="key-value">
              <span class="key">著名大学</span>
              武大、华科、中南财经、华农等
            </div>
            <div class="key-value">
              <span class="key">最大平原</span>
              江汉平原
            </div>
            <div class="key-value">
              <span class="key">最大的山地</span>
              齐岳山
            </div>
            <div class="key-value">
              <span class="key">最大湖泊</span>
              洪湖
            </div>
            <div class="key-value">
              <span class="key">现任领导</span>
              省委书记蒋超良、省长王晓东[5]
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </div>

  <div class="footer w1000">
    <div class="clearfix">
      <div class="fl">
        <div class="links">
          <a href="#"> 关于我们 </a>&nbsp;|
          <a href="#"> 加入我们 </a>&nbsp;|
          <a href="#"> 公司首页 </a>&nbsp;|
          <a href="#"> 意见反馈 </a>&nbsp;|
          <a href="#"> 帮助中心 </a>&nbsp;|
          <a href="#"> 网站公告 </a>
        </div>
        <div style="margin:20px 0;"><a href="#">联系我们</a></div>
        <div class="clearfix contact">
          <div class="fl">
            <p>电 话：010-65936652</p>
            <p>邮 件：yu_qing_2008@163.com</p>
          </div>
          <div class="fr">
            <p>网 址：www.bwnews.org</p>
            <p>地 址：北京市朝阳区光华路15号泰达时代中心4号楼16层</p>
          </div>
        </div>
      </div>
      <div class="fr">
        <div class="coop">
          <p style="margin-bottom: 10px;">友情合作</p>
          <div class="clearfix" style="text-align: center;">
            <div class="fl">
              <a href="#"><img src="style/images/footer1.jpg" alt=""></a>
              <p>清华大学</p>
            </div>
            <div style="display: inline-block;">
              <a href="#"><img src="style/images/footer2.jpg" alt=""></a>
              <p>国家行政学院</p>
            </div>
            <div class="fr">
              <a href="#"><img src="style/images/footer3.jpg" alt=""></a>
              <p>中共中央党校</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- copyright -->
    <div class="copyright">
      <p>Copyright © 2016-2020 All rights reserved.ICP备16028853号北京百问网信息技术有限公司</p>
    </div>
  </div>
</body>
<script>  
// 基于准备好的dom，初始化echarts图表
var myChart = echarts.init(document.getElementById('main')); 

var option = {
    tooltip : {
        trigger: 'item'
    },
    toolbox: {
        show : true,
        orient: 'vertical',
        x:'right',
        y:'center',
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false}
        }
    },
    series : [
        {
            tooltip: {
                trigger: 'item',
                formatter: '{b}'
            },
            name: '选择器',
            type: 'map',
            mapType: 'china',
            mapLocation: {
                x: 'left',
                y: 'top',
                width: '30%'
            },
            roam: true,
            selectedMode : 'single',
            itemStyle:{
                //normal:{label:{show:true}},
                emphasis:{label:{show:true}}
            },
            data:[]
        }
    ],
    animation: false
};

// 请求省动态数据
var provinces;
$.ajax({
  url:"data/province.json",
  async:false,
  type:"get",
  //dataType:"json",
  success: function(result){
    if (result) {
      provinces = result;
      option.series[0].data = result;
      myChart.setOption(option); 
    }
  },
  error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert(XMLHttpRequest.status);
        alert(XMLHttpRequest.readyState);
        alert(textStatus);
      }
});
// 请求市动态数据
var cities;
$.ajax({
  url:"data/shi.json",
  async:false,
  type:"GET",
  //dataType:"json",
  success: function(result){
    if (result) {
      //option.series[1].data = result;
      cities = result;
      //myChart.setOption(option); 
    }
  },
  error: function(errorMsg) {
    //console.log(errorMsg);
    alert("不好意思大爷，图表请求数据失败啦");
  }
});

//var ecConfig = require('echarts/config');
// 手动选中省，弹出下级市 地图
var ecConfig = config;
myChart.on(ecConfig.EVENT.MAP_SELECTED, function (param){
  console.log(param);
    var selected = param.selected;
    var selectedProvince;
    var name;
    for (var i = 0, l = option.series[0].data.length; i < l; i++) {
        name = option.series[0].data[i].name;
        option.series[0].data[i].selected = selected[name];
        if (selected[name]) {
            selectedProvince = name;
        }
    }
  //alert(selectedProvince);
    if (typeof selectedProvince == 'undefined') {
        option.series.splice(1);
        option.legend = null;
        option.dataRange = null;
        myChart.setOption(option, true);
        return;
    }
    option.series[1] = {
        name: '随机数据',
        type: 'map',
        mapType: selectedProvince,
        itemStyle:{
            normal:{label:{show:true}},
            emphasis:{label:{show:true}}
        },
        mapLocation: {
            x: '35%'
        },
        roam: true,
        data: cities
    };
    option.legend = {
        x:'right',
        data:['随机数据']
    };
    option.dataRange = {
        orient: 'horizontal',
        x: 'right',
        min: 0,
        max: 100,
        color:['orange','yellow'],
        text:['高','低'],           // 文本，默认为数值文本
        splitNumber:0
    };
    myChart.setOption(option, true);
})

// 获取url参数，定位省市
function getQueryString(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return decodeURI(r[2]); return null;
}
var p = getQueryString("p");
if (p == null) {
  p = "湖北";
}
//alert(p);
if (p) {
  // 省选中
  //console.log(provinces);
  var pnew = provinces;
  for (var i = 0; i<pnew.length; i++) {
    if (pnew[i].name == p) {
      pnew[i].selected = true;
      break;
    }
  }
  option.series[0].data = pnew;
  // 下级市显示
  option.series[1] = {
        name: '随机数据',
        type: 'map',
        mapType: p,
        itemStyle:{
            normal:{label:{show:true}},
            emphasis:{label:{show:true}}
        },
        mapLocation: {
            x: '35%'
        },
        roam: true,
        data: cities
    };
  option.legend = {
        x:'right',
        data:['随机数据']
    };
    option.dataRange = {
        orient: 'horizontal',
        x: 'right',
        min: 0,
        max: 100,
        color:['orange','yellow'],
        text:['高','低'],           // 文本，默认为数值文本
        splitNumber:0
    };
  myChart.setOption(option, true);
  // 如果传了市，定位市
  var city = getQueryString("c");
  if(city) {
    //console.log(city);
    var tipObj = {seriesIndex: 1, name: city};
    //console.log(tipObj);
    myChart.component.tooltip.showTip(tipObj);
  }
  
}
</script>
</html>
